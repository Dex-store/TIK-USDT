<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… â€¢ TIK-USDT</title>
  <style>
    body{margin:0;font-family:system-ui;background:radial-gradient(1200px 600px at 50% -10%, #1b255a, #060913);color:#eaf0ff}
    .wrap{max-width:1100px;margin:0 auto;padding:18px}
    .topbar{
      display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;
      background:rgba(12,18,45,.75);border:1px solid rgba(255,255,255,.08);border-radius:22px;
      padding:14px 16px;box-shadow:0 20px 60px rgba(0,0,0,.35);backdrop-filter:blur(10px)
    }
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:44px;height:44px;border-radius:16px;background:linear-gradient(135deg,#5b8cff,#7c5cff);
      display:flex;align-items:center;justify-content:center;font-weight:900}
    .muted{color:#a8b3cf;font-size:13px;line-height:1.7}
    .btn{
      padding:11px 14px;border-radius:16px;border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);color:#eaf0ff;font-weight:800;cursor:pointer;text-decoration:none;display:inline-block
    }
    .btn.primary{background:linear-gradient(135deg,#5b8cff,#7c5cff);border-color:transparent}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:14px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .card{
      background:rgba(12,18,45,.75);border:1px solid rgba(255,255,255,.08);border-radius:22px;
      padding:16px;box-shadow:0 20px 60px rgba(0,0,0,.25);backdrop-filter:blur(10px)
    }
    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
    @media(max-width:650px){.kpis{grid-template-columns:1fr}}
    .kpi{border:1px solid rgba(255,255,255,.10);border-radius:18px;padding:12px;background:rgba(255,255,255,.03)}
    .kpi .t{color:#a8b3cf;font-size:12px}
    .kpi .v{font-size:16px;font-weight:900;margin-top:6px;word-break:break-word}
    .links{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    a{color:#9fb0ff;text-decoration:none}
    .ok{color:#7CFFB2}
    .err{color:#FF8FA3}
    input{width:100%;padding:12px;border-radius:16px;border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);color:#eaf0ff;margin-top:10px;outline:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo">T</div>
        <div>
          <div style="font-weight:900">TIK-USDT</div>
          <div class="muted" id="hello">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>
      </div>

      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn" href="../index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <button class="btn primary" id="logoutBtn">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h3 style="margin:0 0 6px">Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
        <div class="muted">Ù‡Ø°Ù‡ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ù† Back4App.</div>

        <div class="kpis">
          <div class="kpi">
            <div class="t">Ø§Ù„Ø¨Ø±ÙŠØ¯</div>
            <div class="v" id="kEmail">â€”</div>
          </div>
          <div class="kpi">
            <div class="t">ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</div>
            <div class="v" id="kRef">â€”</div>
          </div>
          <div class="kpi">
            <div class="t">ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø¹ÙˆØ© Ø§Ù„Ø°ÙŠ Ø§Ø³ØªØ®Ø¯Ù…ØªÙ‡</div>
            <div class="v" id="kPending">â€”</div>
          </div>
        </div>

        <div style="margin-top:12px" class="muted">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© (Ø§Ù†Ø³Ø®Ù‡ ÙˆØ§Ø±Ø³Ù„Ù‡ Ù„ØºÙŠØ±Ùƒ):</div>
        <input id="refLink" readonly>
        <div class="links">
          <button class="btn" id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
        </div>

        <div class="muted" id="msg" style="margin-top:10px"></div>
      </div>

      <div class="card">
        <h3 style="margin:0 0 6px">Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
        <div class="muted">Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù‚Ù†Ø§Ø©:</div>
        <div class="links">
          <a class="btn" href="https://t.me/TIK_USDT" target="_blank">Ø§Ù„Ø¯Ø¹Ù… Ø¹Ù„Ù‰ ØªÙ„Ø¬Ø±Ø§Ù…</a>
          <a class="btn" href="https://t.me/+P2nKCspWsyNmYmFk" target="_blank">Ù‚Ù†Ø§Ø© ØªÙ„Ø¬Ø±Ø§Ù…</a>
        </div>

        <div style="margin-top:14px" class="muted">
          Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø³Ù†Ø¶ÙŠÙ ØµÙØ­Ø§Øª ÙƒØ§Ù…Ù„Ø©: Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§ØªØŒ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ (TX Hash)ØŒ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§ØªØŒ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ØŒ Ø³Ø¬Ù„ Ø§Ù„Ø³Ø­Ø¨...
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/parse/dist/parse.min.js"></script>
  <script src="./config.js"></script>

<script>
  Parse.initialize(window.TIK.PARSE_APP_ID, window.TIK.PARSE_JS_KEY);
  Parse.serverURL = window.TIK.PARSE_SERVER_URL;

  const user = Parse.User.current();
  if (!user) {
    location.href = "../auth/login.html";
  }

  // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  const email = user.get("email") || user.get("username") || "â€”";
  const myRef = user.get("refCode") || "â€”";
  const pending = user.get("pendingRefCode") || "â€”";

  document.getElementById("hello").textContent = "Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹";
  document.getElementById("kEmail").textContent = email;
  document.getElementById("kRef").textContent = myRef;
  document.getElementById("kPending").textContent = pending;

  // Ø±Ø§Ø¨Ø· Ø¥Ø­Ø§Ù„Ø©
  const base = window.location.origin + "/TIK-USDT";
  const link = base + "/auth/signup.html?ref=" + encodeURIComponent(myRef);
  document.getElementById("refLink").value = link;

  copyBtn.onclick = async () => {
    try{
      await navigator.clipboard.writeText(link);
      msg.className = "muted ok";
      msg.textContent = "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· âœ…";
    }catch(e){
      msg.className = "muted err";
      msg.textContent = "Ù„Ù… Ø£Ø³ØªØ·Ø¹ Ø§Ù„Ù†Ø³Ø® ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ â€” Ø§Ù†Ø³Ø®Ù‡ ÙŠØ¯ÙˆÙŠÙ‹Ø§.";
    }
  };

  logoutBtn.onclick = async () => {
    await Parse.User.logOut();
    location.href = "../auth/login.html";
  };
</script>
</body>
          </html>
